# Weather App

This Flutter application is developed as a coding challenge. It shows the weather forecast for Berlin using the OpenWeather API and provides the functionality to change between Celsius and Fahrenheit. The app includes pull-to-refresh and supports both device orientations. There is also basic support for dark/light mode that follows the device current mode.

## Features

- **Cupertino Design**: The app follows Apple's design principles, using Cupertino widgets and themes.
- **State Management**: Bloc is used to manage application state effectively.
- **Testing**:
  - **Integration Tests**: Validated using `integration_test`.
  - **Unit and Widget Tests**: Implemented with `flutter_test` and `mocktail`.
  - **Bloc Tests**: Ensured through `bloc_test`.
  - **Golden Testing**: Visual regression testing is conducted using `golden_toolkit`.
- **Freezed**: The app uses the `freezed` package to generate immutable data classes and union types.

## Architecture Decisions

For more details about the design decisions and implemented technologies, refer to the records in the ADR directory located under `doc/architecture/decisions`.

ADRs include:

- Implement flutter_bloc as state management solution
- Use Cupertino Design
- Implement Testing Libraries
- Integrate Freezed for code generation

## Trade-offs

The following must be taken into consideration because of the time constrains:

- Not every scenario/widget have been covered by tests; there are just examples of different kinds of tests
- No CI/CD implemented
- There is no implementation of localisation for texts
- Accessibility has been overlooked
- The app was only tested on a MacBook Pro, iPhone 16 and iPad Pro
- Further refactoring could be done
- More error handling cases could be implemented in the code
- The theme mode and temperature unit values could be stored in the device
- Better responsive design
- Any configuration to put the app in the stores has not been done
- I have not checked the code generated by the `flutter create` command, so there is a lot of unused code and assets

## Setup and Installation

Must have Flutter installed, see [Install | Flutter](https://docs.flutter.dev/get-started/install)

- First, clone the repository or download the source code
`git clone git@github.com:SwiftlyDaniel/weather-app.git`
- Get into the directory:
`cd weather_app`
- Put your OpenWeather API key in the `.env`. See `default.env` for a reference
`echo "OPEN_WEATHER_MAP_API_KEY=your_api_key_here" > .env`
- Install dependencies
`flutter pub get`
- Run tests
`flutter test`
- Run integration test
`flutter test integration_test/weather_app_test.dart`
- Run golden tests to update screenshots (located in `integration_test/test_goldens`)
`flutter test integration_test/weather_app_golden_test.dart --update-goldens`
- Run the app in debug mode
`flutter run`

### Flutter Doctor output

In case there is any issue with your Flutter version, I include here all the versions I used to run this project.

```BASH
Doctor summary (to see all details, run flutter doctor -v):
[✓] Flutter (Channel stable, 3.27.1, on macOS 15.2 24C101 darwin-arm64, locale en-DE)
[✓] Android toolchain - develop for Android devices (Android SDK version 34.0.0)
[✓] Xcode - develop for iOS and macOS (Xcode 16.1)
[✓] Chrome - develop for the web
[✓] Android Studio (version 2024.2)
[✓] VS Code (version 1.96.2)
[✓] Connected device (4 available)
    ! Error: Browsing on the local area network for Daniel’s iPad. Ensure the device is unlocked and attached with a cable or associated with the same
      local area network as this Mac.
      The device must be opted into Developer Mode to connect wirelessly. (code -27)
[✓] Network resources
```
